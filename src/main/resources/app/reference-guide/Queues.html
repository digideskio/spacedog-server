<!DOCTYPE html>
<html>

	<head>
	  <meta charset="utf-8"/>
	  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	  <meta name="viewport" content="width=device-width, initial-scale=1"/>

	  <title>SpaceZ documentation: Queues</title>
	  <meta name="description" content="Forget about server-side pain. Focus on creating amazing user experiences. Sign up and immediately access our backend services. Save and search for data. Edit and push new contents. Deploy and publish resources and services.
"/>

	  <meta name="author" content="David Attias"/>

	  <link rel="stylesheet" href="/css/spacez.css"/>
	  <link rel="stylesheet" href="/css/highlight.css"/>
	  
	  <link rel="icon" type="image/png" href="images/favicon.png"/>
	</head>

  <body>

	<header>
      <nav>
        <a class= "logo" href="/">SpaceZ</a>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/documentation.html">Documentation</a></li>
          <li><a class="button" href="/signin">Sign in</a></li>
        </ul>
      </nav>    
    </header>

    <menu>
		<h5>User's guide</h5>
		
    <ul>
      
			
       	<li>
          
          
            <a  href="/user-guide/Signing-up.html"> Signing up </a>
          
      </li>
     	
       	<li>
          
          
            <a  href="/user-guide/Storing-and-searching-data.html"> Storing and searching data </a>
          
      </li>
     	
       	<li>
          
          
            <a  href="/user-guide/Data-object-schema.html"> Data object schema </a>
          
      </li>
     	
       	<li>
          
          
            <a  href="/user-guide/Deploy-to-the-cloud.html"> Deploy to the cloud </a>
          
      </li>
     	
       	<li>
          
          
            <a  href="/user-guide/Configurations-and-contents.html"> Configurations and contents </a>
          
      </li>
     	
    </ul>

   	</br>
    <h5>Reference's guide</h5>
		
    <ul>
      
        <li>
          
          
            <a  href="/reference-guide/Accounts.html"> Accounts </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Batch.html"> Batch </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Configuration.html"> Configuration </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Contents.html"> Contents </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Data.html"> Data </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Files.html"> Files </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Jobs.html"> Jobs </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Logging.html"> Logging </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/PDF-&-Emails.html"> PDF & Emails </a>
          
        </li>
      
        <li>
          
            <a  class="active"  href="/reference-guide/Queues.html"> Queues --> </a>
          
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Schema.html"> Schema </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Services.html"> Services </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Stash.html"> Stash </a>
          
        </li>
      
        <li>
          
          
            <a  href="/reference-guide/Users.html"> Users </a>
          
        </li>
      
    </ul>

    </menu>

    <div class="doc">

	    <h1>Queues</h1>

<p>Use a queue when you want to process a task later. This is very usefull to speed up some user requests since you don’t need to wait for all the tasks to complete before returning a result to the user. Some of the tasks might be processed later in queues.</p>

<p>First you need to choose or create a service that will be responsible for the processing to the queue messages (or tasks). Then create a queue. Then add messages to the queue. They will be processed when a CPU is available.</p>

<p>The queue object is of the type:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
     <span class="nt">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;myqueue&quot;</span><span class="p">,</span>
     <span class="nt">&quot;service&quot;</span> <span class="p">:</span> <span class="s2">&quot;processTransfers&quot;</span><span class="p">,</span>
     <span class="nt">&quot;serialize&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="nt">&quot;timeout&quot;</span> <span class="p">:</span> <span class="mi">98798</span><span class="p">,</span>
     <span class="nt">&quot;active&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="nt">&quot;archive&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="nt">&quot;errorPolicy&quot;</span> <span class="p">:</span> <span class="s2">&quot;manual&quot;</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>the queue id</td>
</tr>
<tr>
<td>service</td>
<td>string</td>
<td>the service id</td>
</tr>
<tr>
<td>serialize</td>
<td>boolean</td>
<td>Optional. If true, queue messages are processed one at the time. If false, they can be processed in parallel. Default to false.</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>The timeout in milliseconds of the process of a message. Precedes the service timeout property.</td>
</tr>
<tr>
<td>active</td>
<td>boolean</td>
<td>If false, the queue does not process its messages. But messages can be added to the queue.</td>
</tr>
<tr>
<td>archive</td>
<td>boolean</td>
<td>Optional. Default is false. If true, store all processed messages.</td>
</tr>
<tr>
<td>errorPolicy</td>
<td>string</td>
<td>Optional. Valid values are: delete, manual, automatic. Default is manual.</td>
</tr>
</tbody></table>

<h3>/v1/queue</h3>

<p><code>GET</code> returns all queues.</p>

<p><code>POST</code> creates a new queue.</p>

<ul>
<li>request body: a queue JSON object.</li>
<li>returns a created status object.</li>
</ul>

<h3>/v1/queue/{qid}</h3>

<p><code>GET</code> returns the specified queue.</p>

<p><code>PUT</code> update the specified queue.</p>

<ul>
<li>request body: a queue JSON objet.</li>
<li>returns an updated status object.</li>
</ul>

<p><code>DELETE</code> deletes the specified queue.</p>

<ul>
<li><code>processRemaining</code> = [true]/false : If true, the queue is deleted when all messages are processed. No new message can be added to the queue. If false, remaining messages are discarded and the queue is deleted.</li>
<li>returns a deleted status object.</li>
</ul>

<h3>/v1/queue/{qid}/process</h3>

<p><code>POST</code> adds an object at the end of the specified queue.</p>

<ul>
<li><code>shortcut</code> = [false]/true : If true, adds the object at the top of the queue.</li>
<li>request boby: a JSON object or array the queue service is able to process</li>
<li>returns a created status object.</li>
</ul>

<p><code>GET</code> returns the list of the remaining objects to be processed.</p>

<ul>
<li><code>first</code> = 1 to œ —  The first objet of the list to return. Default is 1.</li>
<li><code>size</code> = 1 to 1000 — The number of objets to return. Default is 10. Maximum is 1000.</li>
<li>returns an array of JSON objects.</li>
</ul>

<h3>/v1/queue/{qid}/processed</h3>

<p><code>GET</code> returns the list of already processed objects from the youngest to the oldest. Processed messages are stored if the queue <code>archive</code> field is est to <code>true</code>.</p>

<ul>
<li><code>first</code> = 1 to œ —  The first objet of the list to return. Default is 1.</li>
<li><code>size</code> = 1 to 1000 — The number of objets to return. Default is 10. Maximum is 1000.</li>
<li>returns an array of JSON objects of this type:</li>
</ul>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;1234567585757&quot;</span><span class="p">,</span>
  <span class="nt">&quot;processed&quot;</span> <span class="p">:</span> <span class="s2">&quot;2016-04-13T23:45:07.454Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;took&quot;</span> <span class="p">:</span> <span class="mi">12562</span><span class="p">,</span>
  <span class="nt">&quot;success&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;message&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;...&quot;</span> <span class="p">:</span> <span class="s2">&quot;...&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3>/v1/queue/{qid}/message/{mid}</h3>

<p><code>GET</code> returns the specified message if it has not been processed or if it has been archived.</p>

<ul>
<li><code>qid</code> the queue id.</li>
<li><code>mid</code> the message id.</li>
</ul>

<p><code>DELETE</code> deletes the specified message if it has not been processed already.</p>

<ul>
<li><code>qid</code> the queue id.</li>
<li><code>mid</code> the message id.</li>
<li>returns a deleted status object.</li>
</ul>


    </div>
  </body>
</html>
